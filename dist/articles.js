(self.webpackChunkblog=self.webpackChunkblog||[]).push([[525],{1966:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var r=n(7294),a=n(8216),i=n(6974),c=n(2341),o=n.n(c),l=(n(9422),n(8548),n(7462)),s=n(4942),u=n(4184),d=n.n(u),m=n(5632);const f=function(e){return r.createElement(m.C,null,(function(t){var n,a=t.getPrefixCls,i=t.direction,c=e.prefixCls,o=e.type,u=void 0===o?"horizontal":o,m=e.orientation,f=void 0===m?"center":m,g=e.orientationMargin,p=e.className,h=e.children,v=e.dashed,y=e.plain,E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),C=a("divider",c),b=f.length>0?"-".concat(f):f,A=!!h,S="left"===f&&null!=g,L="right"===f&&null!=g,N=d()(C,"".concat(C,"-").concat(u),(n={},(0,s.Z)(n,"".concat(C,"-with-text"),A),(0,s.Z)(n,"".concat(C,"-with-text").concat(b),A),(0,s.Z)(n,"".concat(C,"-dashed"),!!v),(0,s.Z)(n,"".concat(C,"-plain"),!!y),(0,s.Z)(n,"".concat(C,"-rtl"),"rtl"===i),(0,s.Z)(n,"".concat(C,"-no-default-orientation-margin-left"),S),(0,s.Z)(n,"".concat(C,"-no-default-orientation-margin-right"),L),n),p),_=(0,l.Z)((0,l.Z)({},S&&{marginLeft:g}),L&&{marginRight:g});return r.createElement("div",(0,l.Z)({className:N},E,{role:"separator"}),h&&r.createElement("span",{className:"".concat(C,"-inner-text"),style:_},h))}))};n(6583);var g=n(1011),p=n(1562),h=n.n(p);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=g.Z.Search;function E(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)([]),2),n=t[0],a=t[1];return(0,r.useEffect)((function(){var t=new Map,n=[];e.tags.forEach((function(e){t.has(e.tag)?t.set(e.tag,t.get(e.tag)+1):t.set(e.tag,1)})),t.forEach((function(e,t){n.push({key:t,val:e,chosen:!1})})),a(n),console.log("sidebar",n)}),[e.tags]),r.createElement("div",{className:h().container},r.createElement("div",{className:h().searchContainer},r.createElement(f,null,"搜索"),r.createElement(y,{placeholder:"Search for Article...",allowClear:!0,size:"large",onSearch:function(t){console.log("search:",e,t),e.search(t)}})),r.createElement("div",{className:h().categoryContainer},r.createElement("div",{className:h().divider},r.createElement(f,null,"分类")),r.createElement("div",{className:h().tagsContainer},n.map((function(t){return r.createElement("div",{className:t.key===e.currentTag?h().tagPairChosen:h().tagPair,key:t.key,onClick:function(t){e.changeTag(t.target.innerHTML===e.currentTag?"":t.target.innerHTML)}},r.createElement("a",{className:h().tagName},t.key),r.createElement("p",{className:h().count},"(",t.val,")"))})))))}n(3375);var C=n(331),b=n(8264),A=n.n(b),S=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"];function L(e){for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return S[t%S.length]}function N(e){return r.createElement("div",{className:A().container,onClick:e.onClick},r.createElement("div",{className:A().headerBar},r.createElement("div",{className:A().created},new Date(e.article.created).toLocaleDateString()),r.createElement("div",{className:A().leftArea},r.createElement(C.Z,{color:L(e.article.tag)}," ",e.article.tag," "))),r.createElement("div",{className:A().mainArea},r.createElement("div",{className:A().title},r.createElement("h3",null," ",e.article.articleTitle," ")),r.createElement("div",{className:A().summary},e.article.summary)))}var _,w=n(1876),B=new Uint8Array(16);function T(){if(!_&&!(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(B)}const x=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,k=function(e){return"string"==typeof e&&x.test(e)};for(var O=[],Z=0;Z<256;++Z)O.push((Z+256).toString(16).substr(1));const P=function(e,t,n){var r=(e=e||{}).random||(e.rng||T)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase();if(!k(n))throw TypeError("Stringified UUID is invalid");return n}(r)};function j(e,t,n,r,a,i,c){try{var o=e[i](c),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){j(i,r,a,c,o,"next",e)}function o(e){j(i,r,a,c,o,"throw",e)}c(void 0)}))}}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(){var e=(0,i.s0)(),t=(0,a.v9)((function(e){return e.window.deviceType})),n=R((0,r.useState)([]),2),c=n[0],l=n[1],s=R((0,r.useState)(""),2),u=s[0],d=s[1],m=R((0,r.useState)(""),2),f=m[0],g=m[1],p=R((0,r.useState)([]),2),h=p[0],v=p[1],y=R((0,r.useState)(Number.MAX_SAFE_INTEGER),2),C=y[0],b=y[1],A=R((0,r.useState)(0),2),S=A[0],L=A[1];return(0,r.useEffect)((function(){F(C,f,u).then((function(e){console.log("loadArticle:",e),v(e.data),b(H(e.data,C))})),w.Z.get("/open/tags").then((function(e){console.log(e.data),l(e.data)})),scrollElem.addEventListener("scroll",(function(e){var t=[e.target.scrollHeight,e.target.scrollTop+e.target.clientHeight];t[1]>=t[0]&&(L(P()),console.log("need load more"))}))}),[u]),(0,r.useEffect)((function(){F(C,f,u).then((function(e){var t=h.slice();console.log("loadArticle:",e);for(var n=0;n<e.data.length;n++)t.push(e.data[n]);t.sort((function(e,t){t.created,e.created})),v(t),b(H(t,C))}))}),[S]),(0,r.useEffect)(M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(C,f,u).then((function(e){console.log("loadArticle:",e),v(e.data),b(H(e.data,C))}));case 2:case"end":return e.stop()}}),e)}))),[f]),r.createElement("div",{className:o().container},r.createElement("div",{className:o().sideBar},"client"===t?r.createElement(E,{tags:c,currentTag:u,changeTag:function(e){b(Number.MAX_SAFE_INTEGER),d(e)},search:function(e){b(Number.MAX_SAFE_INTEGER),g(e)}}):null),r.createElement("div",{className:o().main},r.createElement("div",{id:"scrollElem",className:"client"===t?o().clientContainer:o().mobileContainer},h.map((function(t){return r.createElement(N,{key:t._id,article:t,onClick:function(){console.log("cardClicked"),e("/articlePage/".concat(t._id))}})})))))}function F(e,t,n){return w.Z.get("/open/article",{params:{filter:JSON.stringify({articleTitle:t,created:e,tag:n})}})}function H(e,t){var n;return e.forEach((function(e){e.created<=t&&(n=e.created,t=n)})),console.log("minTime:",n),n}},2341:e=>{e.exports={container:"client-components-articleList-ArticleList_container-pLS6",sideBar:"client-components-articleList-ArticleList_sideBar-Opps",main:"client-components-articleList-ArticleList_main-QuhN",clientContainer:"client-components-articleList-ArticleList_clientContainer-Fu0z",mobileContainer:"client-components-articleList-ArticleList_mobileContainer-vyES"}},8264:e=>{e.exports={container:"client-components-articleList-articleCard-ArticleCard_container-unzR",lift:"client-components-articleList-articleCard-ArticleCard_lift-yOZB",headerBar:"client-components-articleList-articleCard-ArticleCard_headerBar-X0Pm",created:"client-components-articleList-articleCard-ArticleCard_created-xiWx",leftArea:"client-components-articleList-articleCard-ArticleCard_leftArea-g6Sa",mainArea:"client-components-articleList-articleCard-ArticleCard_mainArea-cSbv",title:"client-components-articleList-articleCard-ArticleCard_title-OHtK",summary:"client-components-articleList-articleCard-ArticleCard_summary-zZPW"}},1562:e=>{e.exports={container:"client-components-articleList-sideBar-SideBar_container-bXbE",searchContainer:"client-components-articleList-sideBar-SideBar_searchContainer-m2Lz",categoryContainer:"client-components-articleList-sideBar-SideBar_categoryContainer-ddTG",divider:"client-components-articleList-sideBar-SideBar_divider-Ba_F",tagsContainer:"client-components-articleList-sideBar-SideBar_tagsContainer-e8BT",tagPair:"client-components-articleList-sideBar-SideBar_tagPair-Svi8",tagPairChosen:"client-components-articleList-sideBar-SideBar_tagPairChosen-MeoF",tagName:"client-components-articleList-sideBar-SideBar_tagName-ojxA",count:"client-components-articleList-sideBar-SideBar_count-cAM4"}},8548:()=>{}}]);