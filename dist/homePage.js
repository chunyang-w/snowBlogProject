(self.webpackChunkblog=self.webpackChunkblog||[]).push([[424],{9465:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var a=n(7294),o=n(7536),r=n.n(o),i=n(1876),c=n(8216),l=n(8210),s=n.n(l);function g(e){var t="";return t+="snow-blog-font-"+e.fontSize,t+=" snow-blog-font",e.clickable&&(t+=" snow-blog-link"),t}function m(e){var t=(0,c.v9)((function(e){return e.window.deviceType}));return(0,a.useEffect)((function(){console.log("logging props.pageData, props.clientType",e.pageData,e.clientType)})),a.createElement("div",{style:"mobile"===t?p:d,className:s().container},a.createElement("div",{className:s().imageContainer},a.createElement("div",{className:s().imageWrapper},a.createElement("img",{className:s().imageBox,src:e.pageData.imageUrl}))),a.createElement("div",{className:s().descriptionContainer},a.createElement("div",{className:s().descriptionCenterBox},e.pageData.textLinkList.map((function(e){var t={class:g(e)};return e.clickable&&(t.href=e.linkTarget,t.target="_blank"),a.createElement(e.clickable?"a":"p",t,e.content)})))))}var p={flexDirection:"column"},d={flexDirection:"row"},u=n(57),f=n.n(u);function v(e){var t=(0,c.v9)((function(e){return e.window.deviceType}));return(0,a.useEffect)((function(){console.log("logging props.pageData, props.clientType",e.pageData,e.clientType)})),a.createElement("div",{style:"mobile"===t?h:P,className:f().container},a.createElement("div",{className:f().imageContainer},a.createElement("div",{className:f().imageWrapper},a.createElement("img",{className:f().imageBox,src:e.pageData.imageUrl}))),a.createElement("div",{className:f().descriptionContainer},a.createElement("div",{className:f().descriptionCenterBox},e.pageData.textLinkList.map((function(e){var t={class:g(e)};return e.clickable&&(t.href=e.linkTarget,t.target="_blank"),a.createElement(e.clickable?"a":"p",t,e.content)})))))}var h={flexDirection:"column"},P={flexDirection:"row"},x=(n(7613),n(7049)),b=n(6233),E=n.n(b),y=n(6974);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function k(e){var t=C((0,a.useState)([]),2),n=t[0],o=t[1],r=C((0,a.useState)([]),2),c=(r[0],r[1]),l=(0,y.s0)();return(0,a.useEffect)((function(){console.log("in footer logging props.pageData, props.clientType",e.pageData,e.clientType),c(e.pageData.textLinkList.length>=5?e.pageData.textLinkList.slice(0,5):e.pageData.textLinkList),i.Z.get("/open/article",{params:{filter:JSON.stringify({articleTitle:"",created:Number.MAX_SAFE_INTEGER,tag:""})}}).then((function(e){console.log("in footer, response from article.get:",e),o(e.data.length>=5?e.data.slice(0,5):e.data.length)}))}),[]),a.createElement("div",{className:E().container},a.createElement("div",{className:E().imageContainer},a.createElement("div",{className:E().imageWrapper})),a.createElement("div",{className:E().descriptionContainer},a.createElement("div",{className:E().descriptionCenterBox},a.createElement("div",{className:E().descriptionDetail},a.createElement("div",{className:E().descriptionHeader},"近期文章"),a.createElement(x.Z,null),a.createElement("div",{className:E().descriptionItemBox},n.map((function(e){var t={class:"snow-blog-font-small snow-blog-link snow-blog-font",href:"javascript:void(0)",onClick:function(){console.log("clicked"),l("/articlePage/"+e._id)}};return a.createElement("a",t,e.articleTitle)})))),a.createElement("div",{className:E().descriptionDetail},a.createElement("div",{className:E().descriptionHeader},"相关链接"),a.createElement(x.Z,null),a.createElement("div",{className:E().descriptionItemBox},e.pageData.textLinkList.map((function(e){var t={class:"snow-blog-font-small snow-blog-link snow-blog-font"};return e.clickable&&(t.href=e.linkTarget,t.target="_blank"),a.createElement(e.clickable?"a":"p",t,e.content)}))))),a.createElement("div",{className:E().footerBar},e.pageData.extraInfo)))}var N=n(2036),w=n.n(N),D=n(2562);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function I(){var e=S((0,a.useState)(!0),2),t=e[0],n=e[1],o=S((0,a.useState)(!1),2),c=o[0],l=o[1],s=S((0,a.useState)([]),2),g=s[0],p=s[1],d=S((0,a.useState)([]),2),u=d[0],f=d[1],h=S((0,a.useState)(!1),2),P=h[0],x=h[1];return(0,a.useEffect)((function(){i.Z.get("/open/allPages").then((function(e){console.log("allPages:",e.data),p(e.data.map((function(e){return a.createElement("div",{class:"section",id:e._id},a.createElement("div",{className:w().sectionHeight},"indexPage"===e.type?a.createElement(m,{pageData:e}):"footerPage"===e.type?a.createElement(k,{pageData:e}):a.createElement(v,{pageData:e})))}))),console.log("mounted"),l(!0)}))}),[]),(0,a.useEffect)((function(){console.log("pages changed"),c&&(console.log("data received, processing... "),f(a.createElement(r(),{scrollingSpeed:900,dragAndMove:"vertical",verticalCentered:!1,render:function(e){return e.state,e.fullpageApi,console.log("in render",g),g}})),console.log("assembled"),x(!0))}),[g,c]),(0,a.useEffect)((function(){P&&n(!1),console.log("loaded",P)}),[u,P]),(0,a.useEffect)((function(){console.log("loading:",t,"pagesElem",u)}),[t]),t?a.createElement(D.Z,null):u}},1876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p}),n(6669);var a=n(5026),o=n(9669),r=n.n(o),i=n(8237),c=n.n(i),l=n(9047),s=n(4628),g={baseURL:c().server.prodURL+":"+String(c().server.apiPort),timeout:"8000"},m=r().create({baseURL:g.baseURL,timeout:g.timeout});m.interceptors.request.use((function(e){return e.headers.authToken=l.Z.getState().adminLogin.token,e.headers.username=l.Z.getState().adminLogin.username,e}),(function(e){console.log("[herald] request failed:",e)})),m.interceptors.response.use((function(e){return 0!==e.data.code?(a.ZP.warning(e.data.message),1===e.data.code?a.ZP.error(e.data.message):2===e.data.code|3===e.data.code&&l.Z.dispatch((0,s.av)({username:"",needLogin:!0,token:""})),Promise.reject(e.data.message)):e.data}),(function(e){return console.log("[herald] response failed:",e),Promise.reject(e)}));const p=m},2036:(e,t,n)=>{e.exports={test:"client-components-homepage-HomePage_test-Xv9C",sectionHeight:"client-components-homepage-HomePage_sectionHeight-TK1s"};var a=n(4783)(e.id,{esModule:!1,locals:!0});e.hot.dispose(a)},57:(e,t,n)=>{e.exports={container:"client-components-homepage-contentPage-ContentPage_container-af55",imageContainer:"client-components-homepage-contentPage-ContentPage_imageContainer-dXwU",imageWrapper:"client-components-homepage-contentPage-ContentPage_imageWrapper-iYbV",imageBox:"client-components-homepage-contentPage-ContentPage_imageBox-sA89",descriptionContainer:"client-components-homepage-contentPage-ContentPage_descriptionContainer-YZR_",descriptionCenterBox:"client-components-homepage-contentPage-ContentPage_descriptionCenterBox-xb5d"};var a=n(4783)(e.id,{esModule:!1,locals:!0});e.hot.dispose(a)},6233:(e,t,n)=>{e.exports={container:"client-components-homepage-footerPage-FooterPage_container-Kuvz",imageContainer:"client-components-homepage-footerPage-FooterPage_imageContainer-Fe_e",imageWrapper:"client-components-homepage-footerPage-FooterPage_imageWrapper-syHd",imageBox:"client-components-homepage-footerPage-FooterPage_imageBox-fNmd",descriptionContainer:"client-components-homepage-footerPage-FooterPage_descriptionContainer-ZZlq",descriptionCenterBox:"client-components-homepage-footerPage-FooterPage_descriptionCenterBox-CGMm",descriptionDetail:"client-components-homepage-footerPage-FooterPage_descriptionDetail-wrif",descriptionHeader:"client-components-homepage-footerPage-FooterPage_descriptionHeader-Kgfj",descriptionItemBox:"client-components-homepage-footerPage-FooterPage_descriptionItemBox-fNPx",descriptionItem:"client-components-homepage-footerPage-FooterPage_descriptionItem-PGKT",footerBar:"client-components-homepage-footerPage-FooterPage_footerBar-D73K"};var a=n(4783)(e.id,{esModule:!1,locals:!0});e.hot.dispose(a)},8210:(e,t,n)=>{e.exports={container:"client-components-homepage-indexPage-IndexPage_container-iq5C",imageContainer:"client-components-homepage-indexPage-IndexPage_imageContainer-QNUq",imageWrapper:"client-components-homepage-indexPage-IndexPage_imageWrapper-zb7Q",imageBox:"client-components-homepage-indexPage-IndexPage_imageBox-e4Av",descriptionContainer:"client-components-homepage-indexPage-IndexPage_descriptionContainer-SmE_",descriptionCenterBox:"client-components-homepage-indexPage-IndexPage_descriptionCenterBox-fWPz"};var a=n(4783)(e.id,{esModule:!1,locals:!0});e.hot.dispose(a)}}]);